<div class="flex">
  <app-sidebar class="w-[260px] fixed h-screen z-20"></app-sidebar>
  <div class="flex-1 ml-[260px]">
    <app-navbar class="fixed top-0 left-[260px] right-0 h-[64px] z-10 bg-white border-b"></app-navbar>

    <div class="m-[80px]">
      <div class="flex justify-between items-center mb-6">
        <h2 class="text-2xl font-bold text-gray-800">Lugares Turísticos</h2>
        <button routerLink="/lugares-turisticos/new" class="bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700">
          + Nuevo Lugar
        </button>
      </div>

      <!-- Cargando lugares -->
      <div *ngIf="isLoading" class="text-center py-8">
        <div class="inline-block animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-green-600"></div>
        <p class="mt-2 text-gray-600">Cargando lugares...</p>
      </div>

      <!-- Error -->
      <div *ngIf="errorMessage" class="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4">
        {{ errorMessage }}
      </div>

      <!-- Si no hay lugares -->
      <div *ngIf="!isLoading && lugares.length === 0" class="bg-yellow-100 border border-yellow-400 text-yellow-700 px-4 py-3 rounded">
        No se encontraron lugares turísticos registrados.
      </div>

      <div class="overflow-x-auto shadow rounded-lg" *ngIf="!isLoading && lugares.length > 0">
        <table class="min-w-full text-sm text-left text-gray-700">
          <thead class="bg-gray-100 text-xs uppercase text-gray-600">
            <tr>
              <th class="px-4 py-3">#</th>
              <th class="px-4 py-3">Nombre</th>
              <th class="px-4 py-3">Dirección</th>
              <th class="px-4 py-3">Precio</th>
              <th class="px-4 py-3">Descripción</th>
              <th class="px-4 py-3">Imagen</th>
              <th class="px-4 py-3">Acciones</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let lugar of lugares; let i = index" class="border-b hover:bg-gray-50">
              <td class="px-4 py-2">#{{ i + 1 }}</td>
              <td class="px-4 py-2 font-medium">{{ lugar.nombre }}</td>
              <td class="px-4 py-2">{{ lugar.direccion }}</td>
              <td class="px-4 py-2">s/ {{ lugar.costoEntrada }}</td>
              <td class="px-4 py-2 line-clamp-2 max-w-xs">{{ lugar.descripcion }}</td>
              <td class="px-4 py-2">
                <img [src]="lugar.imagenes[0]?.url || 'assets/img/placeholder.jpg'" alt="Imagen" class="h-12 w-20 object-cover rounded">
              </td>
              <td class="px-4 py-2 flex items-center space-x-2">
                <button [routerLink]="['/lugares-turisticos/edit', lugar.id]" class="text-blue-600 hover:text-blue-800 text-sm">
                  <i class="fas fa-edit"></i> Editar
                </button>
                <button (click)="deleteLugar(lugar.id!)" class="text-red-600 hover:text-red-800 text-sm">
                  <i class="fas fa-trash"></i> Eliminar
                </button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
      
    </div>
  </div>
</div>
